CREATE TABLE User (
    user_id BINARY(16),
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    email VARCHAR(100) UNIQUE,
    address VARCHAR(100),
    password VARCHAR(255),
    msp VARCHAR(50),
    user_type INTEGER,
    PRIMARY KEY (user_id)
);
CREATE TABLE UserDailyIntake (
    user_id BINARY(16),
    created_date DATE,
    calories DECIMAL,
    PRIMARY KEY (user_id, created_date),
    FOREIGN KEY (user_id) REFERENCES User(user_id) ON DELETE CASCADE
);
CREATE TABLE Service (
    service_id BINARY(16),
    name VARCHAR(100),
    price DECIMAL,
    PRIMARY KEY (service_id)
);
CREATE TABLE UserService (
    user_id BINARY(16),
    service_id BINARY(16),
    start_date DATE,
    end_date DATE,
    PRIMARY KEY (user_id, service_id),
    FOREIGN KEY (user_id) REFERENCES User(user_id) ON DELETE CASCADE,
    FOREIGN KEY (service_id) REFERENCES Service(service_id) ON DELETE CASCADE
);
CREATE TABLE Payment (
    user_id BINARY(16),
    service_id BINARY(16),
    from_date DATE,
    to_date DATE,
    amount DECIMAL,
    paid_date DECIMAL,
    due_date DATE,
    PRIMARY KEY (user_id, service_id, from_date, to_date) ,
    FOREIGN KEY (user_id, service_id) REFERENCES UserService(user_id, service_id) ON DELETE CASCADE
);
CREATE TABLE PatientMessage (
    doctor_id BINARY(16),
    patient_id BINARY(16),
    content TEXT,
    is_view INT DEFAULT 0,
    created_date DATETIME,
    PRIMARY KEY (doctor_id, patient_id, created_date),
    FOREIGN KEY (doctor_id) REFERENCES User(user_id) ON DELETE CASCADE,
    FOREIGN KEY (patient_id) REFERENCES User(user_id) ON DELETE CASCADE
);
CREATE TABLE DoctorSolution (
    patient_id BINARY(16),
    doctor_id BINARY(16),
    content TEXT,
    created_date DATETIME,
    PRIMARY KEY (patient_id, doctor_id),
    FOREIGN KEY (patient_id) REFERENCES User(user_id) ON DELETE CASCADE,
    FOREIGN KEY (doctor_id) REFERENCES User(user_id) ON DELETE CASCADE
);
INSERT INTO User (user_id, first_name, last_name, email, address, password, msp, user_type) VALUES ("7d1bb54a-533b-42db-897d-a6cff78c89a7", "Brian", "Vo", "test@test.com", "douglas", "test@test.com", "yes", 1);
INSERT INTO User (user_id, first_name, last_name, email, address, password, user_type) VALUES ("7de6f61c-dcbb-4f1b-8c95-6f6929088f1d", "Daniel", "Bedoya", "admin@admin.com", "Burnaby", "admin@admin.com", 4);
INSERT INTO User (user_id, first_name, last_name, email, address, password, user_type) VALUES ("1de6f61c-dcbb-4f1b-8c95-6f6929088f1a", "Doctor", "Who", "doctor@doctor.com", "Burnaby", "doctor", 2);
INSERT INTO User (user_id, first_name, last_name, email, address, password, user_type) VALUES ("2de6f61c-dcbb-4f1b-8c95-6f6929088f1b", "Doctor 1", "Who 1", "doctor1@doctor.com", "Burnaby", "doctor", 2);